<app-header></app-header>
<section class="instagram-wrap">
  <div class="container">
    <div class="row">
      <div style="width: 100%">
        <div class="instagram-content">
          <div class="row photos-wrap col-xs-12 col-sm-6 col-md-4 col-lg-3"
               style="top: 100px;display: table-cell;left: 50%">
            <!-- Instafeed target div -->
            <div *ngFor="let post of posts">
              <publication (click)="_openPostModal(templateCard)"
                           [id]=post.id
                           [tag]=post.tags
                           [description]=post.description
                           [countLike]=post.countLike
                           [image]="'api/post/getFile/'+ post.filename">
              </publication>

              <ng-template #templateCard class="modal-xl">
                <div class="modal-header">
                  <div class="col-md-4 text-right" style="margin-left: -25%">
                    <img (click)="redirectToUserPage(post.userId)" class="rounded-circle" src="src/assets/img/avataaars.svg" width="15%">
                  </div>
                  <h4 class="modal-title pull-left" style="margin-top: 10px" (click)="redirectToUserPage(post.userId)">{{post.userLogin}}</h4>
                  <button type="button" class="btn btn-danger" style="margin-left: 20px" (click)="_deletePost(post.id)" *ngIf="isAdmin">Delete post</button>
                  <button type="button" class="close pull-right"
                          aria-label="Close" (click)="_closeModal()">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body" style="display: contents">
                  <div class="row">
                    <div class="col-6">
                      <img src="api/post/getFile/{{post.filename}}">
                    </div>
                    <div class="col-6" style="left: -25px;">
                      <div *ngFor="let comment of post.uiComments">
                        <button type="button" class="btn btn-danger" style="margin-left: 20px" (click)="_deleteComment(comment.id)" *ngIf="isAdmin">Delete comment</button>
                        <comment-modal
                          [userName]=comment.uiUser.login
                          [content]=comment.content>
                        </comment-modal>
                      </div>

                      <div class="input-group mb-3" style="top: 10px;border-radius: 10px">
                        <input type="text" class="form-control" [(ngModel)]="comment.content"
                               placeholder="Add a comment..." #content="ngModel" required/>
                        <div class="input-group-append">
                          <button class="btn btn-primary" type="button" (click)="addComment(content,post.id)">Send</button>
                        </div>
                      </div>
                    </div>
                    <div class="col-1">
                      <div style="margin-left: 25px;margin-top: 10px;">{{post.countLike}}</div>
                    </div>
                    <div class="col-1" style="left: -67px;bottom: 15px;">
                      <button type="button" class="btn btn-link" style="width: 150%"
                              (click)="addLike(post.id)"><img src="src/assets/img/like.png"
                                                              style="width: 100%"></button>
                    </div>
                  </div>
                </div>
              </ng-template>
            </div>
          </div>
        </div>
        <button type="button" class="btn btn-primary" style="background-color: white;color: black;margin-left: 41%"
                data-toggle="button" aria-pressed="false"
                autocomplete="false" (click)="nextPage()">Add more...
        </button>
      </div>

    </div>
  </div>
</section>

<app-footer style="top: 100px"></app-footer>
